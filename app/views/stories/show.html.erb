<% if flash[:notice] %>
  <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
    <span class="block sm:inline"><%= flash[:notice] %></span>
  </div>
<% end %>

<div class="bg-white border border-gray-200 mx-auto shadow-sm rounded-lg p-4">
  <div class="flex justify-between">
    <%= render "vote", story: @story %>
    <% link = @story.url_protocol + @story.url %>
    <p class="my-5 mx-2">
      <strong class="block font-dark mb-1">Title:</strong>
      <%= link_to @story.title, link, target: :blank %>
    </p>

    <p class="my-5 flex-1 mx-2">
      <strong class="block font-dark mb-1">Url:</strong>
      
      <%= link_to link, link, target: :blank %>
    </p>
  </div>
  <div class="flex flex-col mx-20">
    <p class=" px-5">
      <strong class="block font-dark mb-1">Description:</strong>
      <%= @story.description %>
    </p>

    <p class="my-5 flex-1 px-5 text-gray-500">
      <%= @story.user.email_address %> <%= time_ago_in_words(@story.created_at) %> ago
    </p>
    <hr/>
    <div class="flex flex-row justify-between items-center mx-5 mt-5">
    
      <%= link_to "Back to stories", stories_path, class: "w-fit rounded-lg py-3 px-5 bg-gray-100 font-medium" %>

      <div class="flex flex-row space-x-2">
        <% if Current.user && Current.user.id == @story.user_id %>
          <%= link_to "Edit", edit_story_path(@story), class: "w-fit rounded-lg py-3 px-5 bg-blue-100 font-medium" %>
          <%= button_to "Destroy", @story, method: :delete, class: "w-fit rounded-lg py-3 px-5 bg-red-100 font-medium", data: { turbo_confirm: "Are you sure you want to delete this story?" } %>
        <% end %>
      </div>
    </div>
  </div>
</div>
